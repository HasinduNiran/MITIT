# SecureAuth — Full-Stack Authentication System

A production-style authentication system built with Node.js/Express (backend) and React/Vite (frontend), generated by **ChatGPT (OpenAI)**.

## Tech Stack

| Layer | Technologies |
|-------|-------------|
| **Backend** | Node.js, Express.js, MongoDB (Mongoose), bcrypt, JWT, Joi, Helmet, Morgan, CORS, express-rate-limit |
| **Frontend** | React 18, React Router v6, Axios, Tailwind CSS v3, react-hot-toast, Vite |

## Prerequisites

- **Node.js 18+** — https://nodejs.org
- **MongoDB** running locally on port `27017` — https://www.mongodb.com/try/download/community
  - OR a MongoDB Atlas connection string (update `MONGO_URI` in `backend/.env`)

---

## Quick Start

### 1. Backend

```bash
cd backend
copy .env.sample .env
npm install
npm run dev
```

Server starts at **http://localhost:5000**

> **Note:** Set a strong `JWT_SECRET` in `backend/.env` before running in production:
> ```
> node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
> ```

### 2. Frontend

```bash
cd frontend
copy .env.sample .env
npm install
npm run dev
```

App starts at **http://localhost:5173**

> The frontend API base URL is controlled by `VITE_API_BASE_URL` in `frontend/.env`.

---

## API Reference

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| `GET` | `/` | No | Service health check |
| `POST` | `/api/auth/register` | No (rate limited) | Register a new user |
| `POST` | `/api/auth/login` | No (rate limited) | Login and receive JWT |
| `GET` | `/api/auth/profile` | `Bearer <token>` | Get current user profile |

### Example: Register

```bash
curl -X POST http://localhost:5000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"name":"Jane Doe","email":"jane@example.com","password":"secret123"}'
```

### Example: Login

```bash
curl -X POST http://localhost:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"jane@example.com","password":"secret123"}'
```

### Example: Get Profile

```bash
curl http://localhost:5000/api/auth/profile \
  -H "Authorization: Bearer <your_jwt_token>"
```

---

## Security Features

- **bcrypt** — passwords hashed with 12 salt rounds (native C++ addon)
- **JWT** — 1-hour expiry with `issuer` and `audience` claims; signed with `JWT_SECRET`
- **Joi** — input validation with `abortEarly: false` (reports all field errors at once)
- **Rate limiting** — 5 requests per 15 minutes on all auth routes
- **Helmet** — sets 15+ security HTTP headers automatically
- **CORS** — restricted to `FRONTEND_ORIGIN` env variable only
- **Morgan** — HTTP request logging (`dev` in development, `combined` in production)
- **10 KB body limit** — prevents oversized JSON payload attacks
- **Generic error messages** — "Invalid email or password" prevents user enumeration
- **Duplicate email protection** — pre-check + MongoDB error code `11000` handling

---

## Frontend Features

- **AuthContext** — global auth state; token in localStorage, profile re-fetched from API on refresh (always fresh data)
- **Axios interceptor** — auto-injects `Authorization: Bearer <token>` on every request
- **ProtectedRoute** — spinner during init; redirects to `/login` saving the intended path
- **Post-login redirect** — returns user to the page they originally tried to access
- **Remember Me** — saves email to localStorage for convenience
- **Real-time validation** — errors shown on blur, updated on every keystroke after first touch
- **Password strength** — 3-level indicator (Weak / Good / Strong) with animated colour bars
- **Show/hide password** — eye icon toggle on password fields
- **Loading spinners** — buttons animate during API calls
- **Toast notifications** — dark styled toasts via `react-hot-toast`

---

## Project Structure

```
Chatgpt/
├── README.md
├── backend/
│   ├── server.js                 # Express app entry point
│   ├── package.json
│   ├── .env.sample               # Environment variable template
│   ├── config/
│   │   └── db.js                 # MongoDB connection (async, exits on failure)
│   ├── controllers/
│   │   └── authController.js     # register, login, profile handlers
│   ├── middleware/
│   │   └── auth.js               # JWT Bearer token verification
│   ├── models/
│   │   └── User.js               # Mongoose User schema (passwordHash field)
│   └── routes/
│       └── auth.js               # Auth routes + rate limiter (all routes)
│
└── frontend/
    ├── index.html
    ├── package.json
    ├── vite.config.js
    ├── tailwind.config.js
    ├── postcss.config.js
    └── src/
        ├── main.jsx              # React entry point
        ├── App.jsx               # Router + route definitions
        ├── index.css             # Tailwind base styles
        ├── lib/
        │   └── api.js            # Axios instance + JWT request interceptor
        ├── context/
        │   └── AuthContext.jsx   # Global auth state provider (useMemo)
        ├── components/
        │   ├── Dashboard.jsx     # Profile card with refresh button
        │   ├── LoginForm.jsx     # Login form + Remember Me
        │   ├── RegisterForm.jsx  # Register form + password strength
        │   ├── Navbar.jsx        # Navigation bar
        │   └── ProtectedRoute.jsx# Auth guard wrapper
        └── pages/
            ├── DashboardPage.jsx # Dashboard page layout
            ├── LoginPage.jsx     # Login page layout
            └── RegisterPage.jsx  # Register page layout
```
